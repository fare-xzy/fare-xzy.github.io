<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600">
  <!-- Background -->
  <rect width="800" height="600" fill="#f8f9fa" rx="10" ry="10"/>
  
  <!-- Title -->
  <text x="400" y="40" font-family="Arial, sans-serif" font-size="28" font-weight="bold" text-anchor="middle" fill="#333">DNS 查询流程：递归 vs 迭代</text>
  
  <!-- Client Side -->
  <g transform="translate(50, 100)">
    <!-- User Computer -->
    <rect x="0" y="0" width="120" height="80" rx="5" ry="5" fill="#e3f2fd" stroke="#2196f3" stroke-width="2"/>
    <text x="60" y="30" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#0d47a1">用户主机</text>
    <text x="60" y="50" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#555">(Client)</text>
    
    <!-- Local DNS Server -->
    <rect x="0" y="250" width="120" height="80" rx="5" ry="5" fill="#e8f5e9" stroke="#4caf50" stroke-width="2"/>
    <text x="60" y="280" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#1b5e20">本地 DNS</text>
    <text x="60" y="300" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#555">(LDNS/ISP)</text>
    
    <!-- Recursive Query Arrow -->
    <path d="M60,80 L60,240" stroke="#ff9800" stroke-width="2" marker-end="url(#arrow)"/>
    <text x="70" y="160" font-family="Arial, sans-serif" font-size="12" fill="#e65100">1. 递归查询</text>
    <text x="70" y="180" font-family="Arial, sans-serif" font-size="10" fill="#777">"帮我查到底"</text>
    
    <path d="M40,240 L40,80" stroke="#9e9e9e" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrow)"/>
    <text x="30" y="160" font-family="Arial, sans-serif" font-size="12" fill="#555" text-anchor="end">8. 返回结果</text>
  </g>
  
  <!-- Internet Side (Iterative Queries) -->
  <g transform="translate(250, 100)">
    <!-- Root DNS -->
    <rect x="150" y="0" width="140" height="60" rx="5" ry="5" fill="#fff3e0" stroke="#ffb74d" stroke-width="2"/>
    <text x="220" y="25" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#e65100">根域名服务器</text>
    <text x="220" y="45" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#555">(Root .)</text>
    
    <!-- TLD DNS -->
    <rect x="150" y="150" width="140" height="60" rx="5" ry="5" fill="#fff3e0" stroke="#ffb74d" stroke-width="2"/>
    <text x="220" y="175" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#e65100">顶级域名服务器</text>
    <text x="220" y="195" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#555">(TLD .com)</text>
    
    <!-- Authoritative DNS -->
    <rect x="150" y="300" width="140" height="60" rx="5" ry="5" fill="#fff3e0" stroke="#ffb74d" stroke-width="2"/>
    <text x="220" y="325" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#e65100">权威域名服务器</text>
    <text x="220" y="345" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#555">(example.com)</text>
    
    <!-- Iterative Arrows -->
    <!-- LDNS to Root -->
    <path d="M-80,260 C-20,260 80,100 140,40" stroke="#2196f3" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
    <text x="20" y="130" font-family="Arial, sans-serif" font-size="12" fill="#1565c0">2. 问 Root</text>
    <path d="M140,50 C80,110 -20,270 -80,270" stroke="#9e9e9e" stroke-width="2" stroke-dasharray="5,5" fill="none" marker-end="url(#arrow)"/>
    <text x="50" y="150" font-family="Arial, sans-serif" font-size="10" fill="#555">3. 指路 TLD</text>
    
    <!-- LDNS to TLD -->
    <path d="M-80,290 C0,290 80,220 140,190" stroke="#2196f3" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
    <text x="50" y="240" font-family="Arial, sans-serif" font-size="12" fill="#1565c0">4. 问 TLD</text>
    <path d="M140,200 C80,230 0,300 -80,300" stroke="#9e9e9e" stroke-width="2" stroke-dasharray="5,5" fill="none" marker-end="url(#arrow)"/>
    <text x="70" y="260" font-family="Arial, sans-serif" font-size="10" fill="#555">5. 指路 Auth</text>
    
    <!-- LDNS to Auth -->
    <path d="M-80,320 L140,320" stroke="#2196f3" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
    <text x="30" y="315" font-family="Arial, sans-serif" font-size="12" fill="#1565c0">6. 问 Auth</text>
    <path d="M140,340 L-80,340" stroke="#4caf50" stroke-width="2" stroke-dasharray="5,5" fill="none" marker-end="url(#arrow)"/>
    <text x="30" y="355" font-family="Arial, sans-serif" font-size="12" fill="#2e7d32" font-weight="bold">7. 返回 IP</text>
  </g>
  
  <!-- Legend/Explanation -->
  <g transform="translate(50, 450)">
    <text x="0" y="0" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#333">流程说明：</text>
    <text x="0" y="30" font-family="Arial, sans-serif" font-size="14" fill="#555">1. 递归查询 (Recursive): 客户端委托本地 DNS 查，必须给结果。</text>
    <text x="0" y="60" font-family="Arial, sans-serif" font-size="14" fill="#555">2. 迭代查询 (Iterative): 本地 DNS 亲自跑腿，各级服务器只指路。</text>
    
    <!-- Visual Key -->
    <line x1="0" y1="90" x2="40" y2="90" stroke="#ff9800" stroke-width="2"/>
    <text x="50" y="95" font-family="Arial, sans-serif" font-size="12" fill="#555">递归请求</text>
    
    <line x1="150" y1="90" x2="190" y2="90" stroke="#2196f3" stroke-width="2"/>
    <text x="200" y="95" font-family="Arial, sans-serif" font-size="12" fill="#555">迭代请求</text>
    
    <line x1="300" y1="90" x2="340" y2="90" stroke="#9e9e9e" stroke-width="2" stroke-dasharray="5,5"/>
    <text x="350" y="95" font-family="Arial, sans-serif" font-size="12" fill="#555">响应/指路</text>
  </g>
  
  <!-- Definitions -->
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#777" />
    </marker>
  </defs>

</svg>