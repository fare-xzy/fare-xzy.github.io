<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 750 400">
  <style>
    .header { fill: #ffccbc; stroke: #d84315; stroke-width: 1; }
    .header-ok { fill: #c8e6c9; stroke: #388e3c; stroke-width: 1; }
    .text { font-family: 'Microsoft YaHei', sans-serif; font-size: 14px; text-anchor: middle; fill: #333; }
    .title { font-family: 'Microsoft YaHei', sans-serif; font-size: 16px; font-weight: bold; text-anchor: middle; fill: #bf360c; }
    .title-ok { font-family: 'Microsoft YaHei', sans-serif; font-size: 16px; font-weight: bold; text-anchor: middle; fill: #2e7d32; }
    .arrow { stroke: #e65100; stroke-width: 2; marker-end: url(#arrowhead); }
    .bad-dep { stroke: #d32f2f; stroke-width: 2; marker-end: url(#arrowhead-red); }
    .note { font-size: 12px; fill: #555; }
  </style>
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#e65100"/>
    </marker>
    <marker id="arrowhead-red" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#d32f2f"/>
    </marker>
  </defs>

  <!-- Scenario Description -->
  <text x="375" y="30" class="text" font-weight="bold" font-size="14">场景：每位导师只教一门课，学生选课时被分配给一位导师</text>

  <!-- Left: Violation -->
  <text x="180" y="70" class="title">非 BCNF (虽然满足 3NF)</text>
  
  <rect x="30" y="100" width="100" height="30" class="header"/> <text x="80" y="120" class="text">学生(Student)</text>
  <rect x="130" y="100" width="100" height="30" class="header"/> <text x="180" y="120" class="text">课程(Course)</text>
  <rect x="230" y="100" width="100" height="30" class="header"/> <text x="280" y="120" class="text">导师(Teacher)</text>

  <!-- Dependencies -->
  <!-- (Student, Course) -> Teacher -->
  <path d="M80 130 L80 145 L280 145 L280 130" fill="none" stroke="#1565c0" stroke-width="1.5" stroke-dasharray="4"/>
  <text x="180" y="160" class="text" fill="#1565c0" font-size="11">(学生, 课程) -> 导师 (主键依赖)</text>

  <!-- Teacher -> Course (Violation) -->
  <path d="M280 100 L280 85 L180 85 L180 100" fill="none" stroke="#d32f2f" stroke-width="2"/>
  <text x="230" y="80" class="text" fill="#d32f2f" font-size="11">导师 -> 课程</text>
  
  <text x="180" y="190" class="note">问题：导师决定课程，但导师不是候选码</text>
  <text x="180" y="210" class="note">异常：新导师若无学生选课，无法记录其教哪门课</text>

  <!-- Transition Arrow -->
  <line x1="350" y1="140" x2="390" y2="140" class="arrow"/>

  <!-- Right: Solution -->
  <text x="560" y="70" class="title-ok">符合 BCNF (拆分)</text>

  <!-- Table 1: Teacher-Course -->
  <text x="560" y="100" class="text" font-size="12" font-weight="bold">表1：导师分工</text>
  <rect x="460" y="110" width="100" height="30" class="header-ok"/> <text x="510" y="130" class="text">导师(PK)</text>
  <rect x="560" y="110" width="100" height="30" class="header-ok"/> <text x="610" y="130" class="text">课程</text>
  <text x="680" y="125" class="text" fill="#2e7d32" font-size="11">导师 -> 课程</text>

  <!-- Table 2: Student-Teacher -->
  <text x="560" y="170" class="text" font-size="12" font-weight="bold">表2：选课记录</text>
  <rect x="460" y="180" width="100" height="30" class="header-ok"/> <text x="510" y="200" class="text">学生(PK)</text>
  <rect x="560" y="180" width="100" height="30" class="header-ok"/> <text x="610" y="200" class="text">导师(PK)</text>
  
  <text x="560" y="240" class="note">此时所有决定因素(导师、学生+导师)都是码</text>

</svg>